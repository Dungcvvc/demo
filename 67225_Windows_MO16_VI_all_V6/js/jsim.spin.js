/***js/jSim.Spin.js begin ***/
jSim.createNameSpace("Spin",function(){this.model=new jSim.Spin.Model();this.view=new jSim.Spin.View(this.model,this)});jSim.Spin.inheritsFrom(jSim.Abstract.Controller);jSim.Spin.extend({init:function(textboxPath,btnIncreasePath,btnDecreasePath,value,separator,unitMeasures,numDecimal,minValue,maxValue){this.model.txtPath=textboxPath;if(arguments[4]===''){separator=' '}this.createArray(textboxPath,value,separator,unitMeasures,numDecimal,minValue,maxValue);var name=$(this);btnIncreasePath.setAction("click","$('"+name+"').changeValue('+');");btnDecreasePath.setAction("click","$('"+name+"').changeValue('-');");this.specializedInit()},specializedInit:function(){},createArray:function(textboxPath,value,separator,unitMeasures,numDecimal,minValue,maxValue){try{id=this.printName(textboxPath);re=/'/g;id=id.replace(re,"");if(unitMeasures!==''){eval('re=/'+unitMeasures+'/gi');currentValue=Number(textboxPath.getText().replace(re,""))}else{currentValue=Number(textboxPath.getText())}if(isNaN(currentValue)){if(minValue==='inf'){currentValue=0}else{currentValue=minValue}}this.model.textboxArray=[value,separator,unitMeasures,numDecimal,currentValue,minValue,maxValue]}catch(e){api.addAction('eccezione in createArray')}},printName:function(obj){try{if(obj.getName()==='root'){return'root'}return this.printName(obj.up())+".down('"+obj.getName()+"')"}catch(e){api.addAction('eccezione in printName')}},changeValue:function(indication){try{var i=0;var content=this.model.txtPath.getText();id=printName(this.model.txtPath);re=/'/g;id=id.replace(re,"");if(this.model.textboxArray[2]!==''){eval('re=/'+this.model.textboxArray[2]+'/gi')}newstr=content.replace(re,'');newstr=newstr.replace(' ','');newstr=newstr.replace(this.model.textboxArray[1],'.');var result=new Number(newstr);if(isNaN(result)||newstr===''){result=this.model.textboxArray[4]}rounding=Math.pow(10,this.model.textboxArray[3]);result=result*rounding;var value=Number(this.model.textboxArray[0])*rounding;if(indication==='increase'||indication==='+'){result=result+value}if(indication==='decrease'||indication==='-'){result=result-value}result=Math.round(result);result=result/rounding;if(this.model.textboxArray[5]!=='inf'&&result<this.model.textboxArray[5]){result=this.model.textboxArray[5]}if(this.model.textboxArray[6]!=='inf'&&result>this.model.textboxArray[6]){result=this.model.textboxArray[6]}this.model.textboxArray[4]=result;result=result.toString();var zeri=0;if(!(result.indexOf('.')>0)){if(this.model.textboxArray[3]>0){zeri=Number(this.model.textboxArray[3]);result+='.'}}else{zeri=Number(this.model.textboxArray[3])-(result.substring((result.indexOf('.')+1),result.length).length)}for(i=0;i<zeri;i++){result+='0'}result=Number(result);result=result.toString();result=result.replace('.',this.model.textboxArray[1]);this.model.txtPath.setText(result.toString()+' '+this.model.textboxArray[2]);this.model.txtPath.activate();this.model.txtPath.selectAll();this.specializedChangeValue()}catch(e){api.addAction('eccezione in changeValue'+e)}},specializedChangeValue:function(){}});jSim.Spin.createNameSpace("Model",function(){txtPath=null;textboxArray=[]});jSim.Spin.Model.inheritsFrom(jSim.Abstract.Model);jSim.Spin.createNameSpace("View",function(model,controller){this.model=model;this.controller=controller});jSim.Spin.View.inheritsFrom(jSim.Abstract.View);
/***js/jSim.Spin.js end ***/
